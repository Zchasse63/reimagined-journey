---
import Layout from './Layout.astro';
import type { CityDataWithSlug } from '@value-source/data';

interface Props {
  city: CityDataWithSlug;
}

const { city } = Astro.props;

const title = `Food Service Distribution in ${city.city}, ${city.state_abbr} | Value Source`;
const description = `${city.delivery_method} to ${city.city}, ${city.state}. ${city.delivery_frequency}. ${city.minimum_order} minimum. Disposables, proteins, custom print, and eco-friendly products for restaurants, caterers, and food trucks.`;

const siteUrl = 'https://valuesource.com';

// Schema.org structured data for Service
const schemaData = {
  '@context': 'https://schema.org',
  '@type': 'Service',
  name: `Food Service Distribution in ${city.city}, ${city.state}`,
  description: description,
  provider: {
    '@type': 'Organization',
    name: 'Value Source',
    url: siteUrl,
  },
  areaServed: {
    '@type': 'City',
    name: city.city,
    containedInPlace: {
      '@type': 'State',
      name: city.state,
    },
  },
  serviceType: 'Food Service Distribution',
};

// BreadcrumbList schema for navigation
const breadcrumbSchema = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    {
      '@type': 'ListItem',
      position: 1,
      name: 'Home',
      item: siteUrl,
    },
    {
      '@type': 'ListItem',
      position: 2,
      name: city.state,
      item: `${siteUrl}/${city.state_slug}/`,
    },
    {
      '@type': 'ListItem',
      position: 3,
      name: city.city,
      item: `${siteUrl}/${city.state_slug}/${city.slug}/`,
    },
  ],
};

// LocalBusiness schema for local SEO
const localBusinessSchema = {
  '@context': 'https://schema.org',
  '@type': 'LocalBusiness',
  '@id': `${siteUrl}/#organization`,
  name: 'Value Source',
  description: 'Food service distribution company serving restaurants, caterers, and food trucks with disposables, proteins, custom print products, and eco-friendly packaging.',
  url: siteUrl,
  telephone: '+1-404-555-1234',
  address: {
    '@type': 'PostalAddress',
    streetAddress: '1234 Distribution Way',
    addressLocality: 'Atlanta',
    addressRegion: 'GA',
    postalCode: '30301',
    addressCountry: 'US',
  },
  geo: {
    '@type': 'GeoCoordinates',
    latitude: 33.749,
    longitude: -84.388,
  },
  areaServed: {
    '@type': 'City',
    name: city.city,
    containedInPlace: {
      '@type': 'State',
      name: city.state,
    },
  },
  priceRange: '$$',
  openingHoursSpecification: [
    {
      '@type': 'OpeningHoursSpecification',
      dayOfWeek: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
      opens: '08:00',
      closes: '17:00',
    },
  ],
  sameAs: [
    'https://www.facebook.com/valuesource',
    'https://www.linkedin.com/company/valuesource',
  ],
};
---

<Layout title={title} description={description}>
  <!-- Structured Data -->
  <script type="application/ld+json" set:html={JSON.stringify(schemaData)} />
  <script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
  <script type="application/ld+json" set:html={JSON.stringify(localBusinessSchema)} />

  <!-- Breadcrumbs -->
  <nav class="bg-slate-50 border-b border-slate-200">
    <div class="container-wide py-3">
      <ol class="flex items-center space-x-2 text-sm">
        <li>
          <a href="/" class="text-slate-500 hover:text-primary-600">Home</a>
        </li>
        <li class="text-slate-400">/</li>
        <li>
          <a href={`/${city.state_slug}/`} class="text-slate-500 hover:text-primary-600">
            {city.state}
          </a>
        </li>
        <li class="text-slate-400">/</li>
        <li class="text-slate-900 font-medium">{city.city}</li>
      </ol>
    </div>
  </nav>

  <slot />
</Layout>
